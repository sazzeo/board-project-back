<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jy.board.blog.dao.CategoryRepository">


    <insert id="insertCategory" parameterType="categoryDto">
        INSERT INTO CATEGORY(BLOG_SEQ, TITLE, SORT, UP_CATEGORY )
        VALUES (#{blogSeq}, #{title}, #{sort}, #{upCategory})
        <selectKey keyProperty="categorySeq" resultType="long" order="AFTER">
            select currval('CATEGORY_SEQ')
        </selectKey>
    </insert>


<!--    <resultMap type="map" id="categoryMap">-->
<!--        <id property="categorySeq" column="CATEGORY_SEQ"/>-->
<!--        <result property="blogSeq" column="BLOG_SEQ"/>-->
<!--        <result property="title" column="TITLE"/>-->
<!--        <result property="sort" column="SORT"/>-->
<!--        <result property="totalCnt" column="TOTAL_CNT"/>-->
<!--        <collection property=""  javaType="list">-->
<!--            <id property="tagSeq" column="TAG_SEQ"/>-->
<!--            <result property="tagName" column="TAG_NAME"/>-->
<!--        </collection>-->
<!--    </resultMap>-->

    <select id="selectCategory" resultType="categoryDto">
        SELECT CATEGORY_SEQ ,
               BLOG_SEQ ,
               TITLE ,
               SORT ,
               UP_CATEGORY ,
               TOTAL_CNT
        FROM CATEGORY
        WHERE BLOG_SEQ = #{blogSeq}
        ORDER BY UP_CATEGORY NULLS FIRST , SORT
    </select>
</mapper>