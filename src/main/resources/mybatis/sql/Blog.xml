<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jy.board.blog.dao.BlogRepository">
    <insert id="insertBlog" parameterType="blogDto">
        INSERT INTO BLOG(ID , TITLE, SUB_TITLE, URL )
        VALUES(#{id} , #{title} , #{subTitle} , #{url} )
        <selectKey keyProperty="blogSeq" resultType="long" order="AFTER">
            select currval('BLOG_SEQ')
        </selectKey>
    </insert>

    <select id="selectProfileBoxInfo" resultType="camelMap">
        SELECT MEMBER.ID,
               MEMBER.NAME,
               BLOG.TITLE,
               BLOG.SUB_TITLE
        FROM MEMBER
                 JOIN BLOG
                      USING (ID)
        WHERE BLOG.URL = #{url};
    </select>
</mapper>